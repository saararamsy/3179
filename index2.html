<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Data Visualizations (2023)</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
            background-color: #f4f4f4;
        }

        .visualization {
            margin: 40px 0;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333333;
            font-weight: bold;
        }

        p {
            color: #7a7a7a;
            max-width: 800px;
            margin: 10px auto;
        }

        h2 {
            color: #4a70a4;
            font-family: 'Georgia', serif;
        }
    </style>
</head>

<body>

    <h1>Global YouTube Statistics 2023</h1>
    <p>Welcome to a visual exploration of YouTube's impressive statistics for the year 2023. The data-driven journey below unveils key insights on subscribers' distribution, video engagement metrics, earnings potential, and more.</p>

    <h2>YouTube Subscribers by Country</h2>
    <p>Gain perspective on the global reach of YouTube as we depict subscribers from diverse corners of the world. Which country do you think has the most YouTube enthusiasts?</p>
    <div class="visualization" id="choropleth-map"></div>

    <h2>Interactive Bubble Chart of YouTube Metrics</h2>
    <p>This intriguing bubble chart illustrates a relation between video views and subscribers. The bubble size also gives a hint about a YouTuber's earnings. Filter by category to delve into specific genres.</p>
    <div class="visualization" id="bubble-chart"></div>

    <h2>Entertainment Category: Channel Type Distribution</h2>
    <p>The entertainment sector is diverse on YouTube. This donut chart breaks down the variety of entertainment channels. From vlogs to movie trailers, which type do you think dominates?</p>
    <div class="visualization" id="doughnut-chart"></div>

    <h2>Champions of YouTube: Top 10 by Subscribers</h2>
    <p>They are the stars of the YouTube universe in 2023. With fanbases often exceeding entire countries, these channels are at the pinnacle. Let's see who's reigning supreme!</p>
    <div class="visualization" id="bar-chart"></div>

    <h2>Earnings Breakdown by Channel Type</h2>
    <p>YouTube is not just about views and likes; it's a lucrative platform for many. This bar chart dissects earnings based on channel types, giving us a peek into the financial aspect of content creation.</p>
    <div class="visualization" id="earnings-chart"></div>



    <script type="text/javascript">
        var choroplethSpec = {
            
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "YouTube Subscribers by Country (2023)",
            "width": 800,
            "height": 400,
            "projection": { "type": "equalEarth" },
            "data": {
                "url": "https://raw.githubusercontent.com/saararamsy/3179/main/ne_110m.json",
                "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
            },
            "transform": [
                {
                    "lookup": "properties.NAME",
                    "from": {
                        "data": {
                            "url": "https://raw.githubusercontent.com/saararamsy/3179/main/Cleaned_Global_YouTube_Statistic_2023.csv"
                        },
                        "key": "Country",
                        "fields": ["subscribers"]
                    }
                }
            ],
            "mark": {"type": "geoshape"},
            "encoding": {
                "color": {
                    "field": "subscribers",
                    "type": "quantitative",
                    "title": "Number of Subscribers"
                },
                "tooltip": [
                    {"field": "properties.NAME", "type": "nominal", "title": "Country"},
                    {"field": "subscribers", "type": "quantitative", "title": "Subscribers"}
                ]
            }
        };

        var bubbleChartSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": 500,
        "height": 400,
        "title": "YouTube Stats Bubble Chart (2023)",
        "data": {
          "url": "https://raw.githubusercontent.com/saararamsy/3179/main/Cleaned_Global_YouTube_Statistic_2023.csv"
        },
        "params": [
          {
            "name": "categorySelect",
            "bind": {
              "input": "select",
              "options": [
                null,
                "Music",
                "Entertainment",
                "Education",
                "Shows",
                "People & Blogs",
                "Gaming"
              ],
              "labels": [
                "Show All",
                "Music",
                "Entertainment",
                "Education",
                "Shows",
                "People & Blogs",
                "Gaming"
              ],
              "name": "Category Selection: "
            }
          }
        ],
        "transform": [
          {
            "filter": "categorySelect == null || datum.category == categorySelect"
          }
        ],
        "encoding": {
          "x": {
            "field": "video views",
            "type": "quantitative",
            "title": "Video Views"
          },
          "y": {
            "field": "subscribers",
            "type": "quantitative",
            "title": "Subscribers"
          }
        },
        "layer": [
          {
            "mark": "circle",
            "encoding": {
              "size": {
                "field": "highest_yearly_earnings",
                "type": "quantitative",
                "title": "Highest Yearly Earnings"
              },
              "color": {
                "field": "category",
                "type": "nominal",
                "title": "Category",
                "legend": {
                  "title": "Category"
                }
              },
              "tooltip": [
                {
                  "field": "Youtuber",
                  "type": "nominal",
                  "title": "YouTuber"
                },
                {
                  "field": "Country",
                  "type": "nominal",
                  "title": "Country"
                },
                {
                  "field": "video views",
                  "type": "quantitative",
                  "title": "Video Views"
                },
                {
                  "field": "subscribers",
                  "type": "quantitative",
                  "title": "Subscribers"
                },
                {
                  "field": "highest_yearly_earnings",
                  "type": "quantitative",
                  "title": "Highest Yearly Earnings"
                }
              ]
            }
          },
          {
            "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -2,
              "fontSize": 8,
              "fontStyle": "italic"
            },
            "encoding": {
              "text": {"field": "Youtuber", "type": "nominal"},
              "color": {"value": "black"},
              "opacity": {
                "condition": {
                  "test": "datum['video views'] > 100000000000",
                  "value": 1
                },
                "value": 0
              },
              "tooltip": [
                {
                  "field": "Youtuber",
                  "type": "nominal"
                }
              ]
            }
          }
        ]
    };


        var doughnutChartSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Distribution of Channel Types in Entertainment Category (2023)",
            "data": {
                "url": "https://raw.githubusercontent.com/saararamsy/3179/main/Cleaned_Global_YouTube_Statistic_2023.csv"
            },
            "transform": [
                {"filter": "datum.category === 'Entertainment'"},
                {
                    "aggregate": [{"op": "count", "as": "num_channels", "field": "Youtuber"}],
                    "groupby": ["channel_type"]
                }
            ],
            "mark": "arc",
            "encoding": {
                "theta": {
                    "field": "num_channels",
                    "type": "quantitative",
                    "stack": true
                },
                "color": {
                    "field": "channel_type",
                    "type": "nominal",
                    "legend": {
                        "title": "Channel Type"
                    }
                },
                "tooltip": [
                    {
                        "field": "channel_type",
                        "type": "nominal",
                        "title": "Channel Type"
                    },
                    {
                        "field": "num_channels",
                        "type": "quantitative",
                        "title": "Number of Channels"
                    }
                ]
            },
            "view": {"stroke": null},
            "config": {
                "arc": {"innerRadius": 60}
            }
        };

        var barChartSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Top 10 YouTube Channels by Subscribers",
            "data": {
                "url": "https://raw.githubusercontent.com/saararamsy/3179/main/Cleaned_Global_YouTube_Statistic_2023.csv"
            },
            "transform":[
                {"sort": [{"field": "subscribers", "order": "descending"}]},
                {"window": [{"op": "row_number", "as": "row_number"}]},
                {"filter": "datum.row_number <= 10"}
            ],
            "layer": [
                {
                    "encoding": {
                        "y": {
                            "field": "Youtuber",
                            "type": "nominal",
                            "sort": "-x",
                            "axis": {"title": "YouTube Channel"}
                        },
                        "x": {
                            "field": "subscribers",
                            "type": "quantitative",
                            "axis": {"title": "Subscribers (in billions)"}
                        },
                        "color": {
                            "field": "subscribers",
                            "type": "quantitative",
                            "scale": {"scheme": "blues"},
                            "legend": {
                                "title": "Subscribers (in billions)"}
                            },
                            "tooltip": [
                                {"field": "Youtuber", "type": "nominal", "title": "YouTuber"},
                                {"field": "subscribers", "type": "quantitative", "title": "Subscribers (in billions)"},
                                {"field": "Country", "type": "nominal", "title": "Country"}
                            ]
                        },
                        "mark": {
                            "type": "bar",
                            "tooltip": true
                        }
                    },
                    {
                        "encoding": {
                            "y": {
                                "field": "Youtuber",
                                "type": "nominal"
                            },
                            "x": {
                                "field": "subscribers",
                                "type": "quantitative"
                            },
                            "text": {
                                "field": "subscribers",
                                "type": "quantitative",
                                "format": ".1f"
                            }
                        },
                        "mark": {
                            "type": "text",
                            "align": "right",
                            "baseline": "middle",
                            "dx": -4
                        }
                    }
                ],
                "config": {
                    "axis": {"grid": false}
                }
            };
            var earningsChartSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": "Earnings by YouTube Channel Type",
            "data": 
            {
                "url": "https://raw.githubusercontent.com/saararamsy/3179/main/Cleaned_Global_YouTube_Statistic_2023.csv"
            },
            "transform": [
                {
                    "fold": ["lowest_yearly_earnings", "highest_yearly_earnings", "lowest_monthly_earnings", "highest_monthly_earnings"]
                },
                {
                    "aggregate": [{"op": "mean", "field": "value", "as": "average_earnings"}],
                    "groupby": ["channel_type", "key"]
                }
            ],
            "mark": "bar",
            "encoding": {
                "x": {
                    "field": "channel_type",
                    "type": "nominal",
                    "title": "Channel Type"
                },
                "y": {
                    "field": "average_earnings",
                    "type": "quantitative",
                    "title": "Average Earnings",
                    "stack": "zero"
                },
                "color": {
                    "field": "key",
                    "type": "nominal",
                    "title": "Earnings Type",
                    "scale": {
                        "domain": ["lowest_yearly_earnings", "highest_yearly_earnings", "lowest_monthly_earnings", "highest_monthly_earnings"],
                        "range": ["#f78d6f", "#4f309b", "#f7c86f", "#4f8b5b"]
                    }
                },
                "tooltip": [{"field": "channel_type", "type": "nominal", "title": "Channel Type"},
                {"field": "key", "type": "nominal", "title": "Earnings Type"},
                {"field": "average_earnings", "type": "quantitative", "title": "Average Earnings"}
            ]
        }
    };

vegaEmbed('#choropleth-map', choroplethSpec);
vegaEmbed('#bubble-chart', bubbleChartSpec);
vegaEmbed('#doughnut-chart', doughnutChartSpec);
vegaEmbed('#bar-chart', barChartSpec);
vegaEmbed('#earnings-chart', earningsChartSpec);

</script>

</body>

</html>
